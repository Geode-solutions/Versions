name: version

on:
  schedule:
    - cron: 0 2 * * *

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        fetch-depth: 0
        token: ${{ secrets.TOKEN }}
    - uses: Geode-solutions/actions/versions@master
      with:
        repository: OpenGeode;OpenGeode-IO;OpenGeode-Geosciences;OpenGeode-GeosciencesIO;OpenGeode-Inspector;Geode-Common_private;Geode-Conversion_private;Geode-Parameterization_private;Geode-BackgroundMesh_private;Geode-ExplicitModeling_private;Geode-ImplicitModeling_private;Geode-SimplexRemesh_private;Geode-SimplexRemeshGeosciences_private;Geode-ViewableObjects_private
        token: ${{ secrets.TOKEN }}
    - uses: stefanzweifel/git-auto-commit-action@v4
      id: commit
      with:
        commit_message: Apply version changes
    - name: "Run if changes have been detected"
      if: steps.commit.outputs.changes_detected != 'true'
      run: exit 1
